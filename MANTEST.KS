CLEARSCREEN.


SET ENGINE TO SHIP:PARTSTAGGED("ENGINE")[0].
// Declaring engine

IF NEXTNODE:DELTAV:MAG >= 40 {
  SET ENGINE:THRUSTLIMIT TO 100.
}


IF NEXTNODE:DELTAV:MAG < 40 AND NEXTNODE:DELTAV:MAG > 10 {
SET ENGINE:THRUSTLIMIT TO 10.
}

IF NEXTNODE:DELTAV:MAG <= 10 {
  SET ENGINE:THRUSTLIMIT TO 0.5.
}
// Changing thrust limiter


SET ANGLE TO NEXTNODE:DELTAV.

PRINT ANGLE.
LOCK STEERING TO NEXTNODE:DELTAV.
// Locks steering to node vector

SET ACCEL TO (ENGINE:POSSIBLETHRUST/1000)/(SHIP:MASS/1000).
// Calculates Ship acceleration
PRINT ACCEL AT (0,5).

SET TTB TO NEXTNODE:DELTAV:MAG/ACCEL.
// Calculates time to burn for node
PRINT TTB AT (0,2).

<<<<<<< HEAD
WARPTO(TIME:SECONDS + NEXTNODE:ETA - TTB/2 - 50).
WAIT UNTIL VANG(SHIP:FACING:VECTOR, NEXTNODE:DELTAV) < 10.
WARPTO(TIME:SECONDS + NEXTNODE:ETA - TTB/2 - 5).
=======
WARPTO(TIME:SECONDS + NEXTNODE:ETA - TTB/2 - 60).
WAIT UNTIL VANG(SHIP:FACING:VECTOR, NEXTNODE:DELTAV) < 5.
WARPTO(TIME:SECONDS + NEXTNODE:ETA - TTB/2 - 4).
// Warping and lineup sequence

>>>>>>> f39fece69ef14dc97feecf6b262cb60e193a5b31
CLEARSCREEN.

UNTIL 0 {

  PRINT NEXTNODE:DELTAV:MAG AT (0,3).
  PRINT "TTB: " + TTB/2 AT (0,1).
  PRINT "ETA: " + NEXTNODE:ETA AT (0,2).
  IF NEXTNODE:ETA <= TTB/2 {
    BREAK.
  }

}
// Waits until burn time

LOCK THROTTLE TO 1.
WHEN NEXTNODE:DELTAV:MAG < 50 THEN LOCK THROTTLE TO NEXTNODE:DELTAV:MAG/50 + 0.1.
// Sets throttle curve

WAIT UNTIL VANG(ANGLE, NEXTNODE:DELTAV) > 90.
// Sees when deltav of nextnode is low

LOCK THROTTLE TO 0.

CLEARSCREEN.

PRINT "PROGRAM FINISHING..." AT (0,0).

WAIT 5.
SET ENGINE:THRUSTLIMIT TO 100.
// Resets engine thrust limit
